<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <!-- <button id="playButton">Start game</button>
    <pre id="log"></pre> -->
    <script>
        // get scores
        let playerScore = 0;
        let computerScore = 0;


        // first func computer choice 2.0, simpler
        function getComputerChoice() {
            const choices = ['rock', 'paper', 'scissors'];
            return choices [Math.floor(Math.random() * 3)]
        }
        //console.log(getComputerChoice());

        // second func human choice // may change that
        /*var userAnswer = function getHumanChoice(){
            return prompt("Whats your choice : ");
        };
        console.log(userAnswer())*/

        // second func human choice 3.0 + fix if users input null
        function getHumanChoice() {
            let answer;
            do {
                answer = prompt("Whats your choice ? (rock, paper or scissors)");

                if (answer === null) {
                    return null;
                }

                answer = answer.toLowerCase();

            } while (!['rock', 'paper', 'scissors'].includes(answer));

            return answer;
        }
        //console.log(getHumanChoice());

        // third func 2.0
        function playRound (humanChoice, computerChoice) {
            //if (!humanSelection || !computerSelection) return 'Invalid choice';

            if (humanChoice === computerChoice){
                return "It's a Tie !";
            } 
            const win = 
                (humanChoice === 'rock' && computerChoice === 'scissors') ||
                (humanChoice === 'paper' && computerChoice === 'rock') ||
                (humanChoice === 'scissors' && computerChoice === 'paper');
            if (win) {
                playerScore++;
                return `You win! ${humanChoice[0].toUpperCase() + humanChoice.slice(1)} beats ${computerChoice}.`;
            } else {
                computerScore++;
                return `You lose! ${computerChoice[0].toUpperCase() + computerChoice.slice(1)} beats ${humanChoice}.`;
            }
        }
        // fourth func game loop - 5 rounds
        let playAgain = true;

        while (playAgain) {
            const humanSelection = getHumanChoice();
            if (humanSelection === null) break; //exit loop/game 
            const computerSelection = getComputerChoice();

            console.log(playRound(humanSelection, computerSelection));
            console.log(`Score - You: ${playerScore} | Computer: ${computerScore}`);

            playAgain = confirm("Do you want to play another round?");
        }
        

    </script>
</body>
</html>